// index.js 
import { createStore } from 'vuex'

const save = (todos) => localStorage.setItem('todos', JSON.stringify(todos))
const load = () => JSON.parse(localStorage.getItem('todos')) || []

export default createStore({
  state: {
    todos: load()
  },
  mutations: {
    ADD_TODO(state, text) {
      state.todos.push({ id: Date.now(), text, done: false })
      save(state.todos)
    },
    TOGGLE_TODO(state, id) {
      const todo = state.todos.find(t => t.id === id)
      if (todo) todo.done = !todo.done
      save(state.todos)
    },
    DELETE_TODO(state, id) {
      state.todos = state.todos.filter(t => t.id !== id)
      save(state.todos)
    }
  },
  actions: {
    addTodo({ commit }, text) {
      commit('ADD_TODO', text)
    },
    toggleTodo({ commit }, id) {
      commit('TOGGLE_TODO', id)
    },
    deleteTodo({ commit }, id) {
      commit('DELETE_TODO', id)
    }
  },
  getters: {
    allTodos: state => state.todos,
    completedTodos: state => state.todos.filter(t => t.done),
    pendingTodos: state => state.todos.filter(t => !t.done)
  }
})
// App.vue
<template>
  <div>
    <h1>Vuex Todo App</h1>
    <input v-model="newTodo" @keyup.enter="addTodo" placeholder="Add a todo" />
    <ul>
      <li v-for="todo in todos" :key="todo.id">
        <input type="checkbox" :checked="todo.done" @change="toggle(todo.id)" />
        <span :style="{ textDecoration: todo.done ? 'line-through' : 'none' }">{{ todo.text }}</span>
        <button @click="remove(todo.id)">ðŸ—‘</button>
      </li>
    </ul>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { useStore } from 'vuex'

const store = useStore()
const newTodo = ref('')

const todos = computed(() => store.getters.allTodos)
const addTodo = () => {
  if (newTodo.value.trim()) {
    store.dispatch('addTodo', newTodo.value)
    newTodo.value = ''
  }
}
const toggle = (id) => store.dispatch('toggleTodo', id)
const remove = (id) => store.dispatch('deleteTodo', id)
</script>

<style>
body { font-family: sans-serif; padding: 20px; }
input[type="text"] { padding: 5px; width: 200px; }
ul { list-style: none; padding: 0; }
li { margin: 5px 0; display: flex; align-items: center; gap: 10px; }
button { background: none; border: none; cursor: pointer; color: red; }
</style>
// main.js
import { createApp } from 'vue'
import App from './App.vue'
import store from './store'

createApp(App).use(store).mount('#app')
// index.html (if needed)
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vuex Todo</title>
</head>
<body>
  <div id="app"></div>
  <script type="module" src="/src/main.js"></script>
</body>
</html>
